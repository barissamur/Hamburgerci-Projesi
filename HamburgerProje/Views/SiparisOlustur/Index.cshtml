@model UygulamaDbContext


@{
    ViewData["Title"] = "Index";
}
<div class="container">


    <div class="row">
        <div class="col-9">

            <h2 class="fw-bold my-5">Sipariş Oluştur</h2>

            @*Menüler*@
            <div class="mb-5 menuler card card-header">
                <h3 class="display-6" id="menuler"></h3>
                @*ajax*@
            </div>

            @* Hamburgerler *@
            <div class="mb-5 hamburgerler card card-header">
                <h3 class="display-6" id="hamburgerler"></h3>
                @*ajax*@
            </div>

            @* İçecekler *@
            <div class="mb-5 icecekler card card-header">
                <h3 class="display-6" id="icecekler"></h3>
                @*ajax*@
            </div>

            @* Soslar *@
            <div class="mb-5 soslar card card-header">
                <h3 class="display-6" id="soslar"></h3>
                @*ajax*@
            </div>

            @* Ekstralar *@
            <div class="mb-5 ekstralar card card-header">
                <h3 class="display-6" id="ekstralar"></h3>
                @*ajax*@
            </div>

        </div>

        <div class="col-3">
            <ul class="position-fixed shadow list-group-item-action list-group list-group-flush" style="top:25%; width:500px">

                <li class="list-group-item list-group-item-info list-group-item-action">  Sapien elit in malesuada semper mi, id sollicitudin urna fermentum.</li>
                <li class="list-group-item list-group-item-info list-group-item-action">  Sapien elit in malesuada semper mi, id sollicitudin urna fermentum.</li>
                <li class="list-group-item list-group-item-info list-group-item-action">  Sapien elit in malesuada semper mi, id sollicitudin urna fermentum.</li>
                <li class="list-group-item list-group-item-info list-group-item-action">  Sapien elit in malesuada semper mi, id sollicitudin urna fermentum.</li>
                <li class="list-group-item list-group-item-info list-group-item-action">  Sapien elit in malesuada semper mi, id sollicitudin urna fermentum.</li>
                <li class="list-group-item list-group-item-info list-group-item-action">  Sapien elit in malesuada semper mi, id sollicitudin urna fermentum.</li>
                <li class="list-group-item list-group-item-info list-group-item-action">  Sapien elit in malesuada semper mi, id sollicitudin urna fermentum.</li>
                <li class="list-group-item list-group-item-info list-group-item-action">  Sapien elit in malesuada semper mi, id sollicitudin urna fermentum.</li>
                <li class="list-group-item list-group-item-info list-group-item-action">  Sapien elit in malesuada semper mi, id sollicitudin urna fermentum.</li>
            </ul>

            <button onclick="sepeteEkle()" class="btn btn-outline-primary position-fixed" style="top:92%; right:110px;"><i class="fa-solid fa-cart-shopping me-1"></i>Sepete Ekle</button>

        </div>
    </div>


</div>
@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script>

    //Menüleri listeliyoruz
    let url = "@Url.Action("TumMenuler", "SiparisOlustur")";
    fetch(url)
        .then(res => res.json())
        .then(data => {
            $("#menuler").html("");
            $("#menuler").append("Menüler");

            for (const menu of data) {

                let menuid = menu.id;

                let menuSayisi = "@Url.Action("menuSayisi", "SiparisOlustur")?id=" + menuid;
                fetch(menuSayisi)
                    .then(res => res.json())
                    .then(veri => {
                        $("#menuler").append(
                            `
                            <div class="w-100 card card-header shadow mb-2">
                                <div class="row p-2">
                                    <div class="p-2 col-xl-7">
                                        <h3 class="fw-bold text-info">${menu.ad}</h3>

                                        <p id="${menu.id}icerik" class="fs-6" style="width: 600px">

                                        </p>
                                        <h4 class="ms-5 fw-bold text-primary">${menu.fiyat.toLocaleString('tr-TR', { style: 'currency', currency: 'TRY' })}</h4>
                                    </div>
                                    <div class="col-xl">
                                        <img class="me-auto mt-2" src="/img/${menu.resim}" height="130" width="180" alt="Card image cap">
                                    </div>
                                    <div class="col-xl d-flex justify-content-between align-items-center">
                                        <a onclick="menuArttir('${menu.id}')" class=""><i class="btn btn-primary fa-solid fa-plus"></i></a>
                                        <span class="fs-3 mt-2 fw-bold" id="${menu.id}menuAdet">${veri}</span>
                                        <a onclick="menuAzalt('${menu.id}')"><i class="btn btn-primary fa-solid fa-minus"></i></a>
                                    </div>
                                </div>
                            </div>
                            `
                        );
                    })


                let hmbUrl = "@Url.Action("Hmler", "SiparisOlustur")?id=" + menuid;
                fetch(hmbUrl)
                    .then(res => res.json())
                    .then(veri => {
                        for (const key in veri) {
                            $(`#${menu.id}icerik`).append(
                                `
                                     <span> ${veri[key]} adet ${key}, </span>
                                `
                            )
                        }

                        let sosUrl = "@Url.Action("Soslar", "SiparisOlustur")?id=" + menuid;
                        fetch(sosUrl)
                            .then(res => res.json())
                            .then(veri => {
                                for (const key in veri) {
                                    $(`#${menu.id}icerik`).append(
                                        `
                                             <span> ${veri[key]} adet ${key}, </span>

                                        `
                                    )
                                }

                                $(`#${menu.id}icerik`).append(
                                    `<br>`
                                )

                                let icecekUrl = "@Url.Action("Icecekler", "SiparisOlustur")?id=" + menuid;
                                fetch(icecekUrl)
                                    .then(res => res.json())
                                    .then(veri => {
                                        for (const key in veri) {
                                            $(`#${menu.id}icerik`).append(
                                                `
                                                     <span> ${veri[key]} adet ${key}, </span>

                                                `
                                            )
                                        }

                                        let ekstraUrl = "@Url.Action("Ekstralar", "SiparisOlustur")?id=" + menuid;
                                        fetch(ekstraUrl)
                                            .then(res => res.json())
                                            .then(veri => {
                                                for (const key in veri) {
                                                    $(`#${menu.id}icerik`).append(
                                                        `
                                                             <span> ${veri[key]} adet ${key}, </span>

                                                        `
                                                    )
                                                }
                                            })
                                    })
                            })
                    })
            }
        })
    //Menüleri listeliyoruz end

    // Siparişe Menü ekleme
    function menuArttir(id) {
            let url = "@Url.Action("SipariseMenuEkle", "SiparisOlustur")?id=" + id;

            fetch(url)
                .then(res => res.text())
                .then(data => {
                    $('#' + id +'menuAdet').html(data);
                })
    }

     // Siparişten Menü çıkar
    function menuAzalt(id) {
             let url = "@Url.Action("SiparistenMenuCikar", "SiparisOlustur")?id=" + id;

            fetch(url)
                .then(res => res.text())
                .then(data => {
                    $('#' + id +'menuAdet').html(data);
                })
     }


    // Siparişe Menü ekleme end


    //Hamburgerleri listeliyoruz
    let hamburgerListesi = "@Url.Action("HamburgerListesi", "SiparisOlustur")";
    fetch(hamburgerListesi)
        .then(res => res.json())
        .then(data => {
            $("#hamburgerler").html("");
            $("#hamburgerler").append("Hamburgerler");

            for (const hmb of data) {

                let hmbId = hmb.id;
                let hmbSayisi = "@Url.Action("hmbSayisi", "SiparisOlustur")?id=" + hmbId;
                fetch(hmbSayisi)
                    .then(res => res.json())
                    .then(veri => {

                        $("#hamburgerler").append(
                            `
                            <div class="w-100 card card-header shadow mb-2">
                                <div class="row p-2">
                                    <div class="p-2 col-xl-7">
                                        <h3 class="fw-bold text-info">${hmb.ad}</h3>

                                        <p id="${hmb.id}icerik" class="fs-6" style="width: 600px">
                                         ${hmb.ad}
                                        </p>
                                        <h4 class="ms-5 fw-bold text-primary">${hmb.fiyat.toLocaleString('tr-TR', { style: 'currency', currency: 'TRY' })}</h4>
                                    </div>
                                    <div class="col-xl">
                                        <img class="me-auto mt-2" src="/img/${hmb.resim}" height="130" width="180" alt="Card image cap">
                                    </div>
                                    <div class="col-xl d-flex justify-content-between align-items-center">
                                        <a onclick="hmbArttir('${hmb.id}')"><i class="btn btn-primary fa-solid fa-plus"></i></a>
                                        <span class="fs-3 mt-2 fw-bold" id="${hmb.id}hmbAdet">${veri}</span>
                                        <a onclick="hmbAzalt('${hmb.id}')"><i class="btn btn-primary fa-solid fa-minus"></i></a>
                                    </div>
                                </div>
                            </div>
                            `
                        )
                    });
            }
        })
    //Hamburgerleri listeliyoruz end


    // Siparişe Hamburger ekleme
    function hmbArttir(id) {
            let url = "@Url.Action("SipariseHmbEkle", "SiparisOlustur")?id=" + id;

            fetch(url)
                .then(res => res.text())
                .then(data => {
                    $('#' + id +'hmbAdet').html(data);
                })
    }

     // Siparişten Hamburger çıkar
    function hmbAzalt(id) {
             let url = "@Url.Action("SiparistenHmbCikar", "SiparisOlustur")?id=" + id;

            fetch(url)
                .then(res => res.text())
                .then(data => {
                    $('#' + id + 'hmbAdet').html(data);
                })
     }



    //İçecekleri listeliyoruz
    let icecekListesi = "@Url.Action("IcecekListesi", "SiparisOlustur")";
    fetch(icecekListesi)
        .then(res => res.json())
        .then(data => {
            $("#icecekler").html("");
            $("#icecekler").append("İçecekler");

            for (const icecek of data) {

                let icecekId = icecek.id;
                let icecekSayisi = "@Url.Action("icecekSayisi", "SiparisOlustur")?id=" + icecekId;
                fetch(icecekSayisi)
                    .then(res => res.json())
                    .then(veri => {

                        $("#icecekler").append(
                            `
                            <div class="w-100 card card-header shadow mb-2">
                                <div class="row p-2">
                                    <div class="p-2 col-xl-7">
                                        <h3 class="fw-bold text-info">${icecek.ad}</h3>

                                        <p id="${icecek.id}icerik" class="fs-6" style="width: 600px">
                                         ${icecek.ad}
                                        </p>
                                        <h4 class="ms-5 fw-bold text-primary">${icecek.fiyat.toLocaleString('tr-TR', { style: 'currency', currency: 'TRY' })}</h4>
                                    </div>
                                    <div class="col-xl">
                                        <img class="me-auto mt-2" src="/img/${icecek.resim}" height="130" width="180" alt="Card image cap">
                                    </div>
                                    <div class="col-xl d-flex justify-content-between align-items-center">
                                        <a onclick="icecekArttir('${icecek.id}')" class=""><i class="btn btn-primary fa-solid fa-plus"></i></a>
                                        <span class="fs-3 mt-2 fw-bold" id="${icecek.id}icecekAdet">${veri}</span>
                                        <a onclick="icecekAzalt('${icecek.id}')" ><i class="btn btn-primary fa-solid fa-minus"></i></a>
                                    </div>
                                </div>
                            </div>
                            `
                        );
                    });
            }
        })
    //İçecekleri listeliyoruz son

    // Siparişe İçecek ekleme
    function icecekArttir(id) {
            let url = "@Url.Action("SipariseIcecekEkle", "SiparisOlustur")?id=" + id;

            fetch(url)
                .then(res => res.text())
                .then(data => {
                    $('#' + id +'icecekAdet').html(data);
                })
    }

     // Siparişten İçecek çıkar
    function icecekAzalt(id) {
             let url = "@Url.Action("SiparistenIcecekCikar", "SiparisOlustur")?id=" + id;

            fetch(url)
                .then(res => res.text())
                .then(data => {
                    $('#' + id + 'icecekAdet').html(data);
                })
     }

    //Sosları listeliyoruz
    let sosListesi = "@Url.Action("SosListesi", "SiparisOlustur")";
    fetch(sosListesi)
        .then(res => res.json())
        .then(data => {
            $("#soslar").html("");
            $("#soslar").append("Soslar");

            for (const sos of data) {

                let sosId = sos.id;
                let sosSayisi = "@Url.Action("sosSayisi", "SiparisOlustur")?id=" + sosId;
                fetch(sosSayisi)
                    .then(res => res.json())
                    .then(veri => {

                        $("#soslar").append(
                            `
                            <div class="w-100 card card-header shadow mb-2">
                                <div class="row p-2">
                                    <div class="p-2 col-xl-7">
                                        <h3 class="fw-bold text-info">${sos.ad}</h3>

                                        <p id="${sos.id}icerik" class="fs-6" style="width: 600px">
                                         ${sos.ad}
                                        </p>
                                        <h4 class="ms-5 fw-bold text-primary">${sos.fiyat.toLocaleString('tr-TR', { style: 'currency', currency: 'TRY' })}</h4>
                                    </div>
                                    <div class="col-xl">
                                        <img class="me-auto mt-2" src="/img/${sos.resim}" height="130" width="180" alt="Card image cap">
                                    </div>
                                    <div class="col-xl d-flex justify-content-between align-items-center">
                                        <a onclick="sosArttir('${sos.id}')" class=""><i class="btn btn-primary fa-solid fa-plus"></i></a>
                                        <span class="fs-3 mt-2 fw-bold" id="${sos.id}sosAdet">${veri}</span>
                                        <a onclick="sosAzalt('${sos.id}')"><i class="btn btn-primary fa-solid fa-minus"></i></a>
                                    </div>
                                </div>
                            </div>
                            `
                        );
                    })
            }
        })
     //Sosları listeliyoruz son

     // Siparişe Sos ekleme
    function sosArttir(id) {
            let url = "@Url.Action("SipariseSosEkle", "SiparisOlustur")?id=" + id;

            fetch(url)
                .then(res => res.text())
                .then(data => {
                    $('#' + id +'sosAdet').html(data);
                })
    }

     // Siparişten Sos çıkar
    function sosAzalt(id) {
             let url = "@Url.Action("SiparistenSosCikar", "SiparisOlustur")?id=" + id;

            fetch(url)
                .then(res => res.text())
                .then(data => {
                    $('#' + id + 'sosAdet').html(data);
                })
     }


    //Ekstra listeliyoruz
    let ekstraListesi = "@Url.Action("EkstraListesi", "SiparisOlustur")";
    fetch(ekstraListesi)
        .then(res => res.json())
        .then(data => {
            $("#ekstralar").html("");
            $("#ekstralar").append("Ekstralar");

            for (const ekstra of data) {

                let ekstraId = ekstra.id;
                let ekstraSayisi = "@Url.Action("ekstraSayisi", "SiparisOlustur")?id=" + ekstraId;
                fetch(ekstraSayisi)
                    .then(res => res.json())
                    .then(veri => {

                        $("#ekstralar").append(
                            `
                            <div class="w-100 card card-header shadow mb-2">
                                <div class="row p-2">
                                    <div class="p-2 col-xl-7">
                                        <h3 class="fw-bold text-info">${ekstra.ad}</h3>
                                        <p id="${ekstra.id}icerik" class="fs-6" style="width: 600px">
                                         ${ekstra.ad}
                                        </p>
                                        <h4 class="ms-5 fw-bold text-primary">${ekstra.fiyat.toLocaleString('tr-TR', { style: 'currency', currency: 'TRY' })}</h4>
                                    </div>
                                    <div class="col-xl">
                                        <img class="me-auto mt-2" src="/img/${ekstra.resim}" height="130" width="180" alt="Card image cap">
                                    </div>
                                    <div class="col-xl d-flex justify-content-between align-items-center">
                                        <a onclick="ekstraArttir('${ekstra.id}')"><i class="btn btn-primary fa-solid fa-plus"></i></a>
                                        <span class="fs-3 mt-2 fw-bold" id="${ekstra.id}ekstraAdet">${veri}</span>
                                        <a onclick="ekstraAzalt('${ekstra.id}')"><i class="btn btn-primary fa-solid fa-minus"></i></a>
                                    </div>
                                </div>
                            </div>
                            `
                        );
                    })
            }
        })
    //Ekstra listeliyoruz son

    // Siparişe Ekstra ekleme
    function ekstraArttir(id) {
            let url = "@Url.Action("SipariseEkstraEkle", "SiparisOlustur")?id=" + id;

            fetch(url)
                .then(res => res.text())
                .then(data => {
                    $('#' + id +'ekstraAdet').html(data);
                })
    }

        // Siparişten Ekstra çıkar
    function ekstraAzalt(id) {
            let url = "@Url.Action("SiparistenEkstraCikar", "SiparisOlustur")?id=" + id;

            fetch(url)
                .then(res => res.text())
                .then(data => {
                    $('#' + id + 'ekstraAdet').html(data);
                })
        }



    </script>
}

